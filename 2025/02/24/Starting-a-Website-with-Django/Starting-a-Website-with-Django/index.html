<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Starting a Website with Django | Ferry's blog</title><meta name="author" content="FerryChan"><meta name="copyright" content="FerryChan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="How to build a websiteA website contains three parts which are a web server, a web application(Django), and a database.  When user enters a URL in browser, a request is sent to the web server. Then, t">
<meta property="og:type" content="article">
<meta property="og:title" content="Starting a Website with Django">
<meta property="og:url" content="http://ferrychan666.github.io/2025/02/24/Starting-a-Website-with-Django/Starting-a-Website-with-Django/index.html">
<meta property="og:site_name" content="Ferry&#39;s blog">
<meta property="og:description" content="How to build a websiteA website contains three parts which are a web server, a web application(Django), and a database.  When user enters a URL in browser, a request is sent to the web server. Then, t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://ferrychan666.github.io/img/Tom.jpg">
<meta property="article:published_time" content="2025-02-24T12:14:10.000Z">
<meta property="article:modified_time" content="2025-06-08T22:40:32.665Z">
<meta property="article:author" content="FerryChan">
<meta property="article:tag" content="django">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ferrychan666.github.io/img/Tom.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Starting a Website with Django",
  "url": "http://ferrychan666.github.io/2025/02/24/Starting-a-Website-with-Django/Starting-a-Website-with-Django/",
  "image": "http://ferrychan666.github.io/img/Tom.jpg",
  "datePublished": "2025-02-24T12:14:10.000Z",
  "dateModified": "2025-06-08T22:40:32.665Z",
  "author": [
    {
      "@type": "Person",
      "name": "FerryChan",
      "url": "http://ferrychan666.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://ferrychan666.github.io/2025/02/24/Starting-a-Website-with-Django/Starting-a-Website-with-Django/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":-1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Starting a Website with Django',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/Tom.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">155</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Ferry's blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Starting a Website with Django</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Starting a Website with Django</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-02-24T12:14:10.000Z" title="Created 2025-02-24 20:14:10">2025-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-06-08T22:40:32.665Z" title="Updated 2025-06-09 06:40:32">2025-06-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h1 id="How-to-build-a-website"><a href="#How-to-build-a-website" class="headerlink" title="How to build a website"></a>How to build a website</h1><p>A website contains three parts which are a web server, a web application(Django), and a database. </p>
<p>When user enters a URL in browser, a request is sent to the web server. Then, the server accepts the request and takes it to the web application through WSGI port. After web application dealing the request with database, the results are sent to the web server by WSGI port. Finally, the sever packages the results into a response and return it to user’s browser. </p>
<p><img src="/./images/image-20250227224013203.png" alt="image-20250227224013203"></p>
<p>Website development is subordinated to software engineering. The process of development is:</p>
<p>Requirement Analysis -&gt; Design -&gt; Coding -&gt; Test -&gt; Maintenance</p>
<ol>
<li><p>Requirement Analysis</p>
<p>Just show the functions in your website. </p>
<ul>
<li>videos list</li>
<li>videos detail </li>
<li>search</li>
<li>payment online(Alipay)</li>
<li>Register&#x2F;login</li>
</ul>
</li>
<li><p>Design</p>
<p>What your website actually looks like?</p>
<ul>
<li>Navigation bar and search button above the page</li>
<li>videos list, video detail </li>
<li>Register and login all in one page</li>
<li>Database Mongo, Mysql</li>
</ul>
</li>
</ol>
<h1 id="MTV"><a href="#MTV" class="headerlink" title="MTV"></a>MTV</h1><p>We separate the interaction of Django into model, template, and view.</p>
<ol>
<li><p>Model</p>
<p>The model is the data operating center, which provides adding, updating, deleting and searching data function from database. </p>
</li>
<li><p>Template</p>
<p>The template defines how to display the data. </p>
</li>
<li><p>View</p>
<p>The view serves as a middleman responsible for delivering the data from the model to the template.</p>
<p>In Django, the view is a python function or class which accepts a web request and respond a web page. </p>
<p><strong>All data flow from user to database should go through views</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_django</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;&lt;html&gt;&lt;body&gt;Hello Django&lt;/body&gt;&lt;/html&gt;&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>We often update our html code, but we do not often change our python code. For convenience, we separate the view into python file and html file using template system.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hello_django</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;hello.html&#x27;</span>, &#123;<span class="string">&#x27;value&#x27;</span>:<span class="string">&#x27;Hello Django&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>hello.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span>Hello Django<span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><img src="/./images/image-20250604172900543.png" alt="image-20250604165402905"></p>
<h1 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h1><ol>
<li><p>Model</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginForm</span>(forms.Form):</span><br><span class="line">    name=forms.CharField()</span><br><span class="line">    password=forms.CharField()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Template</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    &#123;&#123; form &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>View</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        form = LoginForm(request.POST)</span><br><span class="line">        <span class="keyword">if</span> form.is_valid():</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(<span class="string">&quot;login success&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">            form = LoginForm()</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;login.html&#x27;</span>, &#123;<span class="string">&#x27;form&#x27;</span>:form&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><ol>
<li><p>create basic Django project structure</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite my_bbs</span><br></pre></td></tr></table></figure>

<p>Now we can enter our directory to run our project</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd my_bbs</span><br><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>start our apps</p>
<p>We should create some apps to implement different features in our website. \</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd smwl</span><br><span class="line">python manage.py startapp videos</span><br><span class="line">python manage.py startapp index</span><br><span class="line">python manage.py startapp user</span><br></pre></td></tr></table></figure>

<p>Then we can see three folders.</p>
<ul>
<li><code>index</code> – home page</li>
<li><code>commodity</code> – videos list page and videos detail page</li>
<li><code>shopper</code>– user center page, register&#x2F;login page, and online payment</li>
</ul>
<p>Now, we continue create three folders.</p>
<ul>
<li><code>media</code> – video preview</li>
<li><code>templates</code> – HTML files</li>
<li><code>static</code> – css, javascript files</li>
</ul>
<p>Another thing is these three apps we just created should add them in <code>setting.py</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &#x27;django.contrib.admin&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth&#x27;,</span><br><span class="line">    &#x27;django.contrib.contenttypes&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages&#x27;,</span><br><span class="line">    &#x27;django.contrib.staticfiles&#x27;,</span><br><span class="line">    &#x27;videos&#x27;,</span><br><span class="line">    &#x27;index&#x27;,</span><br><span class="line">    &#x27;user&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>And one more thing is the <code>templates</code> folder is the shared resources for all apps. We have to add the templates path in <code>settings.py</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        &#x27;BACKEND&#x27;: &#x27;django.template.backends.django.DjangoTemplates&#x27;,</span><br><span class="line">        &#x27;DIRS&#x27;: [BASE_DIR / &#x27;templates&#x27;],</span><br><span class="line">        &#x27;APP_DIRS&#x27;: True,</span><br><span class="line">        &#x27;OPTIONS&#x27;: &#123;</span><br><span class="line">            &#x27;context_processors&#x27;: [</span><br><span class="line">                &#x27;django.template.context_processors.debug&#x27;,</span><br><span class="line">                &#x27;django.template.context_processors.request&#x27;,</span><br><span class="line">                &#x27;django.contrib.auth.context_processors.auth&#x27;,</span><br><span class="line">                &#x27;django.contrib.messages.context_processors.messages&#x27;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    &#x27;django.middleware.security.SecurityMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;,</span><br><span class="line">    # 添加中间件</span><br><span class="line">    &#x27;django.middleware.locale.LocaleMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.common.CommonMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>mysql database setting</p>
<p><code>setting.py</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,</span><br><span class="line">        &#x27;NAME&#x27;: &#x27;smwl&#x27;,</span><br><span class="line">        &#x27;USER&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;PASSWORD&#x27;: &#x27;123456&#x27;,</span><br><span class="line">        &#x27;HOST&#x27;: &#x27;127.0.0.1&#x27;,</span><br><span class="line">        &#x27;PORT&#x27;: &#x27;3306&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>create a database name babys</p>
<p>enter command: <code>python manage.py migrate</code>, which will create built-in tables in Django.</p>
<p><img src="/./images/image-20250228011814425.png" alt="image-20250228011814425"></p>
</li>
<li><p>static resource</p>
<p>settings.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &#x27;static/&#x27;</span><br><span class="line">STATICFILES_DIRS = [BASE_DIR / &#x27;static&#x27;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>media resource</p>
<p>setting.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MEDIA_URL = &#x27;/media/&#x27;</span><br><span class="line">MEDIA_ROOT = BASE_DIR / &#x27;media&#x27;</span><br></pre></td></tr></table></figure>

<p>urls.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path, re_path</span><br><span class="line">from django.views.static import serve</span><br><span class="line">from django.conf import settings</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&#x27;admin/&#x27;, admin.site.urls),</span><br><span class="line">    # media resources</span><br><span class="line">    re_path(&#x27;media/(?P&lt;path&gt;.*)&#x27;, serve,</span><br><span class="line">            &#123;&#x27;document_root&#x27;: settings.MEDIA_ROOT&#125;, name=&#x27;media&#x27;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h1><p>Route is AKA Uniform Resource Locator(URL). The <code>urls.py</code> defines all URLs. As the project’s functionality expands, the number of  route definitions in the <code>urls.py</code> of the project folder will continue to grow, making it increasingly difficult to manage. </p>
<p>In order to distinguish URLs of different apps, we are supposed to define a route for every app in <code>urls.py</code> of project folder. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, re_path, include</span><br><span class="line"><span class="keyword">from</span> django.views.static <span class="keyword">import</span> serve</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, include((<span class="string">&#x27;index.urls&#x27;</span>, <span class="string">&#x27;index&#x27;</span>), namespace=<span class="string">&#x27;index&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;commodity/&#x27;</span>, include((<span class="string">&#x27;commodity.urls&#x27;</span>, <span class="string">&#x27;commodity&#x27;</span>), namespace=<span class="string">&#x27;commodity&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;shopper/&#x27;</span>, include((<span class="string">&#x27;shopper.urls&#x27;</span>, <span class="string">&#x27;shopper&#x27;</span>), namespace=<span class="string">&#x27;shopper&#x27;</span>)),</span><br><span class="line">    <span class="comment"># media resources</span></span><br><span class="line">    re_path(<span class="string">&#x27;media/(?P&lt;path&gt;.*)&#x27;</span>, serve,</span><br><span class="line">            &#123;<span class="string">&#x27;document_root&#x27;</span>: settings.MEDIA_ROOT&#125;, name=<span class="string">&#x27;media&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>path(&#39;commodity/&#39;, include((&#39;commodity.urls&#39;, &#39;commodity&#39;), namespace=&#39;commodity&#39;)),</code></p>
<p>This code means that we set a URL pattern, 127.0.0.1:8000&#x2F;commodity. The <code>include(&#39;commodity.urls&#39;, &#39;commodity&#39;)</code> means take the URL we just create to be managed by <code>commodity.urls</code> in the commodity folder. The <code>namespace=&#39;commodity&#39;</code> assigns a namespace to this app, allowing us to reference its URLs uniquely in templates and views.</p>
<p>Therefore, we have to create <code>urls.py</code> file in commodity folder. Similarly, create <code>urls.py</code> file in index and shopper folders respectively. </p>
<p>In <code>urls.py</code> of commodity app, </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;.html&#x27;</span>, commodityView, name=<span class="string">&#x27;commodity&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;/detail.&lt;int:id&gt;.html&#x27;</span>, detailView, name=<span class="string">&#x27;detail&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>path(&#39;.html&#39;, commodityView, name=&#39;commodity&#39;),</code></p>
<p>This code set a real URL, 127.0.0.1:8000&#x2F;commodity. When user request the URL, Django take the request to be managed by <code>detailView</code> , a view function. The <code>name=&#39;commodity&#39;</code> names the URL. </p>
<p>Similarly, </p>
<p>In <code>urls.py</code> of index app, </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, indexView, name=<span class="string">&#x27;index&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>In <code>urls.py</code> of shopper app, </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;.html&#x27;</span>, shopperView, name=<span class="string">&#x27;shopper&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;/login.html&#x27;</span>, loginView, name=<span class="string">&#x27;login&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;/logout.html&#x27;</span>, logoutView, name=<span class="string">&#x27;logout&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;/shopcart.html&#x27;</span>, shopcartView, name=<span class="string">&#x27;shopcart&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h1 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h1><h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><p>login mysql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE django_bbs;</span><br></pre></td></tr></table></figure>

<p>create an account, whose name is ‘work’ and password is ‘Djangobbs’.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER work IDENTIFIED BY &#x27;Djangobbs&#x27;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL ON django_bbs .* TO &#x27;work&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<p>The migrate command makes model sync to our database</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>Now, we can see that the admin, auth and others table are created in our django_bbs.</p>
<p><img src="/./images/image-20250605074130626.png" alt="image-20250605074130626"></p>
<h1 id="Back-end-Management"><a href="#Back-end-Management" class="headerlink" title="Back-end Management"></a>Back-end Management</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createsuperuser --username=admin --email=admin@email.com</span><br></pre></td></tr></table></figure>

<p>Now we can open url <code>http://127.0.0.1:8000/admin/</code> to login back-end management system.</p>
<h1 id="App"><a href="#App" class="headerlink" title="App"></a>App</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp post</span><br></pre></td></tr></table></figure>

<p>Now we data an app directory in root directory. </p>
<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>Model is a python class to deal the data with database including:</p>
<ol>
<li>inherit <code>django.db.models.Mode</code></li>
<li>inner class <code>Meta</code></li>
<li>Field Type attributes</li>
<li><code>__str__</code> method</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaseModel</span>(models.Model):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        abstract = <span class="literal">True</span></span><br><span class="line">        ordering = [<span class="string">&#x27;-created_time&#x27;</span>]</span><br><span class="line">    created_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>, help_text=<span class="string">u&#x27;创建时间&#x27;</span>)</span><br><span class="line">    last_modified = models.DateTimeField(auto_now=<span class="literal">True</span>, help_text=<span class="string">u&#x27;修改时间&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Topic</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    title = models.CharField(max_length=<span class="number">255</span>, unique=<span class="literal">True</span>, help_text=<span class="string">u&#x27;话题标题&#x27;</span>)</span><br><span class="line">    content = models.TextField(help_text=<span class="string">u&#x27;话题内容&#x27;</span>)</span><br><span class="line">    is_online = models.BooleanField(default=<span class="literal">True</span>, help_text=<span class="string">u&#x27;话题是否在线&#x27;</span>)</span><br><span class="line">    user = models.ForeignKey(to=User, to_field=<span class="string">&#x27;id&#x27;</span>, on_delete=models.CASCADE, help_text=<span class="string">u&#x27;关联用户表&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%d: %s&#x27;</span> % (<span class="variable language_">self</span>.<span class="built_in">id</span>, <span class="variable language_">self</span>.title[<span class="number">0</span>:<span class="number">20</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Comment</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    content = models.CharField(max_length=<span class="number">255</span>, help_text=<span class="string">u&#x27;话题评论&#x27;</span>)</span><br><span class="line">    topic = models.ForeignKey(to=Topic, to_field=<span class="string">&#x27;id&#x27;</span>, on_delete=models.CASCADE, help_text=<span class="string">u&#x27;关联话题表&#x27;</span>)</span><br><span class="line">    up = models.IntegerField(default=<span class="number">0</span>, help_text=<span class="string">u&#x27;支持&#x27;</span>)</span><br><span class="line">    down = models.IntegerField(default=<span class="number">0</span>, help_text=<span class="string">u&#x27;反对&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%d: %s&#x27;</span> % (<span class="variable language_">self</span>.<span class="built_in">id</span>, <span class="variable language_">self</span>.content[<span class="number">0</span>:<span class="number">20</span>])</span><br></pre></td></tr></table></figure>

<p>migrate them to database</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &#x27;post.apps.PostConfig&#x27;,</span><br><span class="line">    &#x27;django.contrib.admin&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth&#x27;,</span><br><span class="line">    &#x27;django.contrib.contenttypes&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages&#x27;,</span><br><span class="line">    &#x27;django.contrib.staticfiles&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations post</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>The post_topic and post_comment were created in database.</p>
<p>After we define our models, we can use it to create objects!!!</p>
<p>Firstly, we need an User object to create a Topic object. Secondly, we use the Topic object to create Comment object. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python manage.py shell</span><br><span class="line"># use save() method to create model object</span><br><span class="line">&gt;&gt;&gt; from post.models import Topic, Comment</span><br><span class="line">&gt;&gt;&gt; from django.contrib.auth.models import User</span><br><span class="line">&gt;&gt;&gt; user=User.objects.get(username=&#x27;admin&#x27;)</span><br><span class="line">&gt;&gt;&gt; topic=Topic(title=&#x27;first topic&#x27;, content=&#x27;This is the first topic!&#x27;, user=user)</span><br><span class="line">&gt;&gt;&gt; topic.save()</span><br><span class="line">&gt;&gt;&gt; comment=Comment(content=&#x27;very good!&#x27;, topic=topic, up=88, down=32)</span><br><span class="line">&gt;&gt;&gt; comment.save()</span><br><span class="line"># use create() method to create model object</span><br><span class="line">&gt;&gt;&gt; user=User.objects.get(username=&#x27;admin&#x27;)</span><br><span class="line">&gt;&gt;&gt; topic_2=Topic.objects.create(title=&#x27;second topic&#x27;, content=&quot;This is the second topic!&#x27;, user=user)</span><br><span class="line">&gt;&gt;&gt; topic_2=Topic.objects.create(title=&#x27;second topic&#x27;, content=&#x27;This is the second topic!&#x27;, user=user)</span><br><span class="line">&gt;&gt;&gt; Comment.object.create(content=&#x27;good!&#x27;, topic=topic_2, up=30, down=17)</span><br><span class="line">&gt;&gt;&gt; Comment.objects.create(content=&#x27;good!&#x27;, topic=topic_2, up=30, down=17)</span><br><span class="line">&lt;Comment: 3: good!&gt;</span><br></pre></td></tr></table></figure>

<p>Now, we can see the data in the database!</p>
<p>ORM（Object-Relational Mapping) have lots of method like this to operate the database. </p>
<p>But life is short, we need a more simple way to interact with our models. This is Back-end Management. </p>
<h2 id="Register-to-back-end"><a href="#Register-to-back-end" class="headerlink" title="Register to back-end"></a>Register to back-end</h2><p>admin.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> post.models <span class="keyword">import</span> Topic, Comment</span><br><span class="line"><span class="comment"># Register your models here.</span></span><br><span class="line">admin.site.register([Topic, Comment])</span><br></pre></td></tr></table></figure>

<p>As you can see, these two models add into our back-end management.</p>
<p><img src="/./images/image-20250605173333006.png" alt="image-20250605173333006"></p>
<p>Now we can change our database by UI. </p>
<h1 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h1><h2 id="Function-views"><a href="#Function-views" class="headerlink" title="Function views"></a>Function views</h2><p>In Django, each URL pattern is mapped to corresponding view function, which receives the request and return a response.</p>
<p>my_bbs&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> post <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;post/hello&#x27;</span>, views.hello_django_bbs)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>In path() method, the first parameter is the URL and the second parameter is the view function.</p>
<p>post&#x2F;views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_django_bbs</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&quot;&lt;h1&gt;Hello Django BBS!&lt;/h1&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250606161422363.png" alt="image-20250606161422363"></p>
<p>As you can see, we can access the <code>http://127.0.0.1:8000/post/hello</code> URL sending a request. After that, we will see the response. </p>
<h2 id="Including-another-URLconf"><a href="#Including-another-URLconf" class="headerlink" title="Including another URLconf"></a>Including another URLconf</h2><p>post&#x2F;urls.py (we need to create it firstly)</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> post <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;hello/&#x27;</span>, views.hello_django_bbs)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>my_bbs&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;post/&#x27;</span>, include(<span class="string">&#x27;post.urls&#x27;</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Now, the URL starting with <code>post/</code>  will be handled by the URlconf of the post app.</p>
<p>This URL mapping method is responsible for routing different requests to their corresponding apps.</p>
<h2 id="Class-based-views"><a href="#Class-based-views" class="headerlink" title="Class-based views"></a>Class-based views</h2><p>Before our view is a function, actually views can be represented as a class. </p>
<p>post&#x2F;views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"><span class="keyword">from</span> django.utils.decorators <span class="keyword">import</span> method_decorator</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FirstView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    html = <span class="string">&#x27;&lt;h1&gt;(%s) Hello Django BBS!&lt;/h1&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="variable language_">self</span>.html % <span class="string">&#x27;GET&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="variable language_">self</span>.html % <span class="string">&#x27;POST&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @method_decorator(<span class="params">csrf_exempt</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dispatch</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>(FirstView, <span class="variable language_">self</span>).dispatch(request, *args, **kwargs)</span><br></pre></td></tr></table></figure>

<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> post <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> post.views <span class="keyword">import</span> FirstView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;hello/&#x27;</span>, views.hello_django_bbs),</span><br><span class="line">    path(<span class="string">&#x27;hello_class/&#x27;</span>, FirstView.as_view())</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h2 id="Dynamic-URL"><a href="#Dynamic-URL" class="headerlink" title="Dynamic URL"></a>Dynamic URL</h2><p>We already know that the view can accept a URL as a parameter. Moreover, the view can accept other parameters. </p>
<p>view.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dynamic_hello</span>(<span class="params">request, year, month, day</span>):</span><br><span class="line">    html = <span class="string">&quot;&lt;h1&gt;(%s) Hello Django BBS!&lt;/h1&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html % (<span class="string">&#x27;%s-%s-%s&#x27;</span> % (year, month, day)))</span><br></pre></td></tr></table></figure>

<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;dynamic/&lt;int:year&gt;/&lt;int:month&gt;/&lt;int:day&gt;&#x27;</span>, views.dynamic_hello),</span><br></pre></td></tr></table></figure>

<p>Our view can take 3 parameters!</p>
<p><img src="/./images/image-20250607060457060.png" alt="image-20250607060457060"></p>
<h2 id="Interact-with-models"><a href="#Interact-with-models" class="headerlink" title="Interact with models"></a>Interact with models</h2><p>Don’t forget that the purpose of views is to handle to data from user to models. Now, we do some exercises.</p>
<p>We define the data returning form in the <code>post_service.py</code> firstly. </p>
<p>post_service.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">build_topic_base_info</span>(<span class="params">topic</span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: topic.<span class="built_in">id</span>,</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: topic.title,</span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>: topic.user.username,</span><br><span class="line">        <span class="string">&#x27;created_time&#x27;</span>: topic.created_time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>post&#x2F;views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse, JsonResponse</span><br><span class="line"><span class="keyword">from</span> post.models <span class="keyword">import</span> Topic</span><br><span class="line"><span class="keyword">from</span> post.post_service <span class="keyword">import</span> build_topic_base_info</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">topic_list_view</span>(<span class="params">request</span>):</span><br><span class="line">    topic_qs = Topic.objects.<span class="built_in">all</span>()</span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="string">&#x27;count&#x27;</span>: topic_qs.count(),</span><br><span class="line">        <span class="string">&#x27;info&#x27;</span>: [build_topic_base_info(topic) <span class="keyword">for</span> topic <span class="keyword">in</span> topic_qs]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(result)</span><br></pre></td></tr></table></figure>

<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;topic_list/&#x27;</span>, views.topic_list_view),</span><br></pre></td></tr></table></figure>



<p><img src="/./images/image-20250607063918427.png" alt="image-20250607063918427"></p>
<p>This view shows the number of topic objects, and the info of every topic object in a list. </p>
<p>Besides, try to read two models.</p>
<p>post_service.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">build_comment_info</span>(<span class="params">comment</span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: comment.<span class="built_in">id</span>,</span><br><span class="line">        <span class="string">&#x27;content&#x27;</span>: comment.content,</span><br><span class="line">        <span class="string">&#x27;up&#x27;</span>: comment.up,</span><br><span class="line">        <span class="string">&#x27;down&#x27;</span>: comment.down,</span><br><span class="line">        <span class="string">&#x27;created_time&#x27;</span>: comment.created_time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;last_modified_time&#x27;</span>: comment.last_modified.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> post.models <span class="keyword">import</span> Comment</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_topic_detail_info</span>(<span class="params">topic</span>):</span><br><span class="line">    comment_qs = Comment.objects.<span class="built_in">filter</span>(topic=topic)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: topic.<span class="built_in">id</span>,</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: topic.title,</span><br><span class="line">        <span class="string">&#x27;content&#x27;</span>: topic.content,</span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>: topic.user.username,</span><br><span class="line">        <span class="string">&#x27;created_time&#x27;</span>: topic.created_time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;last_modified&#x27;</span>: topic.last_modified.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;comments&#x27;</span>: [build_comment_info(comment) <span class="keyword">for</span> comment <span class="keyword">in</span> comment_qs]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> post.post_service <span class="keyword">import</span> build_topic_detail_info</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">topic_detail_view</span>(<span class="params">request, topic_id</span>):</span><br><span class="line">    result = &#123;&#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = build_topic_detail_info(Topic.objects.get(pk=topic_id))</span><br><span class="line">    <span class="keyword">except</span> Topic.DoesNotExist:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(result)</span><br></pre></td></tr></table></figure>

<p>Now we can send two parameters in URL to view function.</p>
<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;topic/&lt;int:topic_id&gt;/&#x27;</span>, views.topic_detail_view),</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250608053103668.png" alt="image-20250608053103668"></p>
<h2 id="Shortcuts"><a href="#Shortcuts" class="headerlink" title="Shortcuts"></a>Shortcuts</h2><p>The <code>render()</code> using dictionary and model responses a HttpResponse object. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> post.models <span class="keyword">import</span> Topic</span><br><span class="line"><span class="keyword">from</span> post.post_service <span class="keyword">import</span> build_topic_base_info</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">topic_list_view</span>(<span class="params">request</span>):</span><br><span class="line">    topic_qs = Topic.objects.<span class="built_in">all</span>()</span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="string">&#x27;count&#x27;</span>: topic_qs.count(),</span><br><span class="line">        <span class="string">&#x27;info&#x27;</span>: [build_topic_base_info(topic) <span class="keyword">for</span> topic <span class="keyword">in</span> topic_qs]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;post/topic_list.html&#x27;</span>, result)</span><br></pre></td></tr></table></figure>

<p>The <code>render()</code>  function combines the <code>result</code> dictionary and <code>post/topic_list.html</code> template to generate an final html page.</p>
<h1 id="Templates"><a href="#Templates" class="headerlink" title="Templates"></a>Templates</h1><p>Templates are just a form of a HTML page, just like models are a form of database tables.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from django.template import Template</span><br><span class="line">&gt;&gt;&gt; from django.template import Context</span><br><span class="line">&gt;&gt;&gt; t = Template(&quot;This is &#123;&#123; project &#125;&#125;, &#123;&#123; True.real &#125;&#125;&quot;)</span><br><span class="line">&gt;&gt;&gt; c = Context(&#123; &#x27;project&#x27;: &#x27;Django BBS&#x27;&#125;)</span><br><span class="line">&gt;&gt;&gt; t.render(c)</span><br><span class="line">&#x27;This is Django BBS, 1&#x27;</span><br></pre></td></tr></table></figure>

<p>As you can see the render function just uses the key’s value in context object to replace the <code>&#123;&#123; key &#125;&#125;</code> in the template object. </p>
<p>But in order to separate the HTML and the view function, we put the template in the <code>templates/post</code> directory. </p>
<p>views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.template.loader <span class="keyword">import</span> get_template</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_django_bbs</span>(<span class="params">request</span>):</span><br><span class="line">    t = get_template(<span class="string">&#x27;post/hello_django_bbs.html&#x27;</span>)</span><br><span class="line">    html = t.render(&#123;<span class="string">&#x27;project&#x27;</span>: <span class="string">&#x27;Django BBS&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure>

<p>hello_django_bbs.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123; project &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>







<h2 id="TemplateView"><a href="#TemplateView" class="headerlink" title="TemplateView"></a>TemplateView</h2><p>To keep it simple, we make our view inherit class <code>TemplateView</code>, which will find templates in directory <code>post/templates/</code> by default. </p>
<p>The definition of <code>TemplateView</code>  is:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TemplateView</span>(TemplateResponseMixin, ContentMixin, View)</span><br></pre></td></tr></table></figure>

<p>As we can see, it inherits <code>TemplateResponseMixin</code> and <code>ContentMixin</code> classes. </p>
<p><code>ContentMixin</code> defines a method <code>get_context_data</code> returning a dictionary object rendering the template. We usually rewrite this method. </p>
<p><code>TemplateResponseMixin</code> defines a <code>template_name</code> attribute specifying the path of the template. </p>
<p>views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> TemplateView</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IndexView</span>(<span class="title class_ inherited__">TemplateView</span>):</span><br><span class="line">    <span class="comment"># show our template path. (post/templates/post/index.html)</span></span><br><span class="line">    template_name = <span class="string">&#x27;post/index.html&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_context_data</span>(<span class="params">self, **kwargs</span>):   </span><br><span class="line">        context = <span class="built_in">super</span>(IndexView, <span class="variable language_">self</span>).get_context_data(**kwargs)</span><br><span class="line">        context[<span class="string">&#x27;hello&#x27;</span>] = <span class="string">&#x27;Hello Django BBS&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> context</span><br></pre></td></tr></table></figure>

<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;index/&#x27;</span>, views.IndexView.as_view()),</span><br></pre></td></tr></table></figure>

<h2 id="ListView"><a href="#ListView" class="headerlink" title="ListView"></a>ListView</h2><p>The <code>ListView</code> class is written to show models list. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListView</span>(MutipleObjectTemplateResponseMixin, BaseListView)</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MultipleObjectTemplateResponseMixin</span>(<span class="title class_ inherited__">TemplateResponseMixin</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Mixin for responding with a template and list of objects.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    template_name_suffix = <span class="string">&quot;_list&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_template_names</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return a list of template names to be used for the request. Must return</span></span><br><span class="line"><span class="string">        a list. May not be called if render_to_response is overridden.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            names = <span class="built_in">super</span>().get_template_names()</span><br><span class="line">        <span class="keyword">except</span> ImproperlyConfigured:</span><br><span class="line">            <span class="comment"># If template_name isn&#x27;t specified, it&#x27;s not a problem --</span></span><br><span class="line">            <span class="comment"># we just start with an empty list.</span></span><br><span class="line">            names = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># If the list is a queryset, we&#x27;ll invent a template name based on the</span></span><br><span class="line">        <span class="comment"># app and model name. This name gets put at the end of the template</span></span><br><span class="line">        <span class="comment"># name list so that user-supplied names override the automatically-</span></span><br><span class="line">        <span class="comment"># generated ones.</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.object_list, <span class="string">&quot;model&quot;</span>):</span><br><span class="line">            opts = <span class="variable language_">self</span>.object_list.model._meta</span><br><span class="line">            names.append(</span><br><span class="line">                <span class="string">&quot;%s/%s%s.html&quot;</span></span><br><span class="line">                % (opts.app_label, opts.model_name, <span class="variable language_">self</span>.template_name_suffix)</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> names:</span><br><span class="line">            <span class="keyword">raise</span> ImproperlyConfigured(</span><br><span class="line">                <span class="string">&quot;%(cls)s requires either a &#x27;template_name&#x27; attribute &quot;</span></span><br><span class="line">                <span class="string">&quot;or a get_queryset() method that returns a QuerySet.&quot;</span></span><br><span class="line">                % &#123;</span><br><span class="line">                    <span class="string">&quot;cls&quot;</span>: <span class="variable language_">self</span>.__class__.__name__,</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> names</span><br></pre></td></tr></table></figure>

<p>As you can see, <code>MultipleObjectTemplateResponseMixin</code> method will auto returning names, path of template. </p>
<p>For example, if we want to list the model <code>Topic</code>, the model name is <code>post/topic_list.html</code> by default. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseListView</span>(MultipleObjectMixin, View):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Base view for displaying a list of objects.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This requires subclassing to provide a response mixin.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="variable language_">self</span>.object_list = <span class="variable language_">self</span>.get_queryset()</span><br><span class="line">        allow_empty = <span class="variable language_">self</span>.get_allow_empty()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> allow_empty:</span><br><span class="line">            <span class="comment"># When pagination is enabled and object_list is a queryset,</span></span><br><span class="line">            <span class="comment"># it&#x27;s better to do a cheap query than to load the unpaginated</span></span><br><span class="line">            <span class="comment"># queryset in memory.</span></span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.get_paginate_by(<span class="variable language_">self</span>.object_list) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> <span class="built_in">hasattr</span>(</span><br><span class="line">                <span class="variable language_">self</span>.object_list, <span class="string">&quot;exists&quot;</span></span><br><span class="line">            ):</span><br><span class="line">                is_empty = <span class="keyword">not</span> <span class="variable language_">self</span>.object_list.exists()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                is_empty = <span class="keyword">not</span> <span class="variable language_">self</span>.object_list</span><br><span class="line">            <span class="keyword">if</span> is_empty:</span><br><span class="line">                <span class="keyword">raise</span> Http404(</span><br><span class="line">                    _(<span class="string">&quot;Empty list and “%(class_name)s.allow_empty” is False.&quot;</span>)</span><br><span class="line">                    % &#123;</span><br><span class="line">                        <span class="string">&quot;class_name&quot;</span>: <span class="variable language_">self</span>.__class__.__name__,</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">        context = <span class="variable language_">self</span>.get_context_data()</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.render_to_response(context)</span><br></pre></td></tr></table></figure>

<p><code>get_queryset()</code> is used to get the model list. </p>
<p><code>get_context_data()</code>  is used to return context data to render the template. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> ListView</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TopicList</span>(<span class="title class_ inherited__">ListView</span>):</span><br><span class="line">    model = Topic</span><br></pre></td></tr></table></figure>

<p><code>model = Topic</code> tells Django getting the <code>Topic</code> model data to render the template <code>post/templates/post/topic_list.html</code>. </p>
<h3 id="Namespace"><a href="#Namespace" class="headerlink" title="Namespace"></a>Namespace</h3><p>To divide the URLs, Django provides the namespace concept. </p>
<p>Namespace divides the URLs by apps. Therefore, we need to name the app. </p>
<p>my_bbs&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;post/&#x27;</span>, include(<span class="string">&#x27;post.urls&#x27;</span>, namespace=<span class="string">&#x27;bbs_post&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>post&#x2F;urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app_name = <span class="string">&#x27;post&#x27;</span></span><br><span class="line">path(<span class="string">&#x27;topic/&lt;int:topic_id&gt;/&#x27;</span>, views.topic_detail_view, name=<span class="string">&#x27;topic_detail&#x27;</span>),</span><br></pre></td></tr></table></figure>

<p>We set the app’s name as <code>post</code>, and the URL’s name as <code>topic_detail</code></p>
<p>Now we can use namespace in the template.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% url &#x27;post:topic_detail&#x27; topic.id %&#125;</span><br></pre></td></tr></table></figure>

<p>The <code>topic.id</code>  is the parameter.</p>
<p>topic_list.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for topic in object_list %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;post:topic_detail&#x27; topic.id %&#125;&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; topic.title &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250608224625173.png" alt="image-20250608224625173"></p>
<h1 id="Form-System"><a href="#Form-System" class="headerlink" title="Form System"></a>Form System</h1><p>Let’s view how the Form system work firstly.</p>
<p>user enter a word in form and submit it –&gt; browser sent a GET request –&gt; view function get the parameter in the request –&gt; search in database –&gt; render the templates </p>
<p>post&#x2F;search_topic.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/post/search_topic/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;search_topic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>This form sends a parameter called <code>title</code> in the request. The <code>search_topic</code> view gets it, searches topic objects including this <code>title</code>,  in database  renders the objects as <code>object_list</code> to the <code>post/topic_list.html</code>  template. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search_topic_form</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># display the form template</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;post/search_topic.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_topic</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># get form search parameters</span></span><br><span class="line">    topic_qs = Topic.objects.<span class="built_in">filter</span>(title__contains=request.GET[<span class="string">&#x27;title&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;post/topic_list.html&#x27;</span>, context=&#123;<span class="string">&#x27;object_list&#x27;</span>: topic_qs&#125;)</span><br></pre></td></tr></table></figure>

<p>topic_list.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for topic in object_list %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;post:topic_detail&#x27; topic.id %&#125;&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; topic.title &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>post&#x2F;views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;search_topic_form/&#x27;</span>, views.search_topic_form),</span><br><span class="line">path(<span class="string">&#x27;search_topic/&#x27;</span>, views.search_topic),</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250609044639447.png" alt="image-20250609044639447"></p>
<p><img src="/./images/image-20250609045118686.png" alt="image-20250609045118686"></p>
<p>The following improvement avoids sending <code>NULL</code> to the view.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search_topic</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> request.GET.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">        errors = [<span class="string">&#x27;title is invalid&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;post/search_topic.html&#x27;</span>, context=&#123;<span class="string">&#x27;errors&#x27;</span>: errors&#125;)</span><br><span class="line">    <span class="comment"># get form search parameters</span></span><br><span class="line">    topic_qs = Topic.objects.<span class="built_in">filter</span>(title__contains=request.GET[<span class="string">&#x27;title&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;post/topic_list.html&#x27;</span>, context=&#123;<span class="string">&#x27;object_list&#x27;</span>: topic_qs&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% if errors %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            &#123;% for error in errors %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/post/search_topic/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;search_topic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="CBV"><a href="#CBV" class="headerlink" title="CBV"></a>CBV</h1><p>Django has introduced the <strong>Class-Based View (CBV)</strong> feature, which encapsulates commonly used code for view development. This allows developers to quickly build data views without writing a large amount of code. This approach, which handles requests and responses in the form of classes, is known as <strong>CBV (Class-Based View)</strong>.</p>
<h2 id="Data-Display-Views"><a href="#Data-Display-Views" class="headerlink" title="Data Display Views"></a>Data Display Views</h2><ul>
<li><p>RedirectView</p>
</li>
<li><p>TemplateView</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index/urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, index.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;create/&#x27;</span>, create, name=<span class="string">&#x27;create&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;myCookie/&#x27;</span>, myCookie, name=<span class="string">&#x27;myCookie&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index/views.py</span></span><br><span class="line"><span class="keyword">from</span> django.views.generic.base <span class="keyword">import</span> TemplateView</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span>(<span class="title class_ inherited__">TemplateView</span>):</span><br><span class="line">    template_name = <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    template_engine = <span class="literal">None</span></span><br><span class="line">    content_type = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># setting variables for templates</span></span><br><span class="line">    extra_context = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;This is GET&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Get data from templates</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_context_data</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        context = <span class="built_in">super</span>().get_context_data(**kwargs)</span><br><span class="line">        context[<span class="string">&#x27;value&#x27;</span>] = <span class="string">&quot;I am MyDjango&quot;</span></span><br><span class="line">        <span class="keyword">return</span> context</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># setting variables for templates</span></span><br><span class="line">        <span class="variable language_">self</span>.extra_context = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;This is POST&#x27;</span>&#125;</span><br><span class="line">        context = <span class="variable language_">self</span>.get_context_data(**kwargs)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.render_to_response(context)</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># templates/index.html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; value &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250301212140503.png" alt="image-20250301212140503"></p>
</li>
<li><p>ListView</p>
<p>ListView can allow us to control database by <code>models.py</code>. </p>
<p><img src="/./images/image-20250303191517871.png" alt="image-20250303191517871"></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># models.py</span></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonInfo</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>And we use commands to generate database tables.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span>(<span class="title class_ inherited__">ListView</span>):</span><br><span class="line">    template_name = <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    <span class="comment"># setting variables</span></span><br><span class="line">    extra_context = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;人员信息表&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># numbers per page</span></span><br><span class="line">    paginate_by = <span class="number">1</span></span><br><span class="line">    <span class="comment"># querying the model</span></span><br><span class="line">    queryset = PersonInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># setting template context</span></span><br><span class="line">    context_object_name = <span class="string">&#x27;personinfo_list&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    &#123;% for i in personinfo_list %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>&#123;&#123; i.age &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">&#123;% if is_paginated %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span>&gt;</span></span><br><span class="line">        &#123;% if page_obj.has_previous %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/?page=&#123;&#123; page_obj.previous_page_number &#125;&#125;&quot;</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">        &#123;% if page_obj.has_next %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/?page=&#123;&#123; page_obj.next_page_number &#125;&#125;&quot;</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;page-current&quot;</span>&gt;</span></span><br><span class="line">            第&#123;&#123; page_obj.number &#125;&#125;页,</span><br><span class="line">            共&#123;&#123; page_obj.paginator.num_pages &#125;&#125;页</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>DetailView</p>
</li>
</ul>
<h2 id="Data-Manipulation-Views"><a href="#Data-Manipulation-Views" class="headerlink" title="Data Manipulation Views"></a>Data Manipulation Views</h2><ul>
<li><p>FormView</p>
<p>User can transfer data to server (actually is database) by formView. </p>
<p>Firstly, we have to create <code>form.py</code> in the index folder. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># form.py</span></span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> PersonInfo</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonInfoForm</span>(forms.ModelForm):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = PersonInfo</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index/urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, index.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;result&#x27;</span>, result, name=<span class="string">&#x27;result&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> django.views.generic.edit <span class="keyword">import</span> FormView</span><br><span class="line"><span class="keyword">from</span> .form <span class="keyword">import</span> PersonInfoForm</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">result</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Success&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span>(<span class="title class_ inherited__">FormView</span>):</span><br><span class="line">    initial = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Betty&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line">    template_name = <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    form_class = PersonInfoForm</span><br><span class="line">    success_url = <span class="string">&#x27;/result&#x27;</span></span><br><span class="line">    extra_context = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;人员信息表&#x27;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># index.html</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    &#123;&#123; form.as_p &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确定&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>CreateView</p>
<p>The <code>CreateView</code> bases on the <code>FormView</code> and adds creating data feature. So we just need to change the views.py above. </p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic.edit <span class="keyword">import</span> CreateView</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">result</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Success&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span>(<span class="title class_ inherited__">CreateView</span>):</span><br><span class="line">    initial = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Betty&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>&#125;</span><br><span class="line">    template_name = <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">    success_url = <span class="string">&#x27;/result&#x27;</span></span><br><span class="line">    <span class="comment"># 表单生成方式一</span></span><br><span class="line">    <span class="comment"># form_class = PersonInfoForm</span></span><br><span class="line">    <span class="comment"># 表单生成方式二</span></span><br><span class="line">    model = PersonInfo</span><br><span class="line">    fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>]</span><br><span class="line">    extra_context = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;人员信息表&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UpdateView</p>
</li>
<li><p>DeleteView</p>
</li>
</ul>
<h1 id="Templates-1"><a href="#Templates-1" class="headerlink" title="Templates"></a>Templates</h1><p>Templates combine with context <code>&#123;&#123; variable &#125;&#125;</code> which is conveyed by view function or class, tags <code>&#123;% tag %&#125;</code> which are function in templates, and </p>
<p>The variable supports all data type in python. </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 假如variable1 = &#x27;字符串或整型&#x27;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; variable1 &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"># 输出“<span class="tag">&lt;<span class="name">div</span>&gt;</span>字符串或整型<span class="tag">&lt;/<span class="name">div</span>&gt;</span>”</span><br><span class="line"># 假如variable2=&#123;&#x27;name&#x27;: &#x27;字典或实例化对象&#x27;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; variable2.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"># 输出“<span class="tag">&lt;<span class="name">div</span>&gt;</span>字典或实例化对象<span class="tag">&lt;/<span class="name">div</span>&gt;</span>”</span><br><span class="line"># 假如variable3 = [&#x27;元组或列表&#x27;]</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; variable3.0 &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"># 输出“<span class="tag">&lt;<span class="name">div</span>&gt;</span>元组或列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span>”</span><br></pre></td></tr></table></figure>



<p><img src="/./images/image-20250303194308637.png" alt="image-20250303194308637"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># for标签，支持嵌套，myList可为列表、元组或某个对象</span><br><span class="line"># item可自定义命名，代表当前循环的数据对象</span><br><span class="line"># &#123;% endfor %&#125;是循环区域终止符，代表这区域的代码由标签for输出</span><br><span class="line">&#123;% for item in myList %&#125;</span><br><span class="line">&#123;&#123; item &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"># if标签，支持嵌套</span><br><span class="line"># 判断条件符与上下文之间使用空格隔开，否则程序会抛出异常</span><br><span class="line"># &#123;% endif %&#125;与&#123;% endfor %&#125;的作用是相同的</span><br><span class="line">&#123;% if name == &quot;Lily&quot; %&#125;</span><br><span class="line">&#123;&#123; name &#125;&#125;</span><br><span class="line">&#123;% elif name == &quot;Lucy&quot; %&#125;</span><br><span class="line">&#123;&#123; name &#125;&#125;</span><br><span class="line">&#123;% else %&#125;</span><br><span class="line">&#123;&#123; name &#125;&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"># url标签</span><br><span class="line"># 生成不带变量的URL地址</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;index&#x27; %&#125;&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"># 生成带变量的URL地址</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;page&#x27; 1 %&#125;&quot;</span>&gt;</span>第1页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"># with标签，与Python的with语法的功能相同</span><br><span class="line"># total=number无须空格隔开，否则抛出异常</span><br><span class="line">&#123;% with total=number %&#125;</span><br><span class="line">&#123;&#123; total &#125;&#125;</span><br><span class="line">&#123;% endwith %&#125;</span><br><span class="line"># load标签，导入静态文件标签库staticfiles</span><br><span class="line"># staticfiles来自settings.py的INSTALLED_APPS</span><br><span class="line">&#123;% load staticfiles %&#125;</span><br><span class="line"># static标签，来自静态文件标签库staticfiles</span><br><span class="line">&#123;% static &quot;css/index.css&quot; %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="template-inheritance"><a href="#template-inheritance" class="headerlink" title="template inheritance"></a>template inheritance</h2><p>Firstly, we use <code>&#123;% block name %&#125;` and `&#123;% endblock %&#125;</code> to define the content of <code>base.html</code>. After that, we can rewrite the base.html in <code>index.html</code>, where we write <code>&#123;% extends "base.html" %&#125;</code> at first line to inherit all base.html and if we use <code>&#123;% block name %&#125;` and `&#123;% endblock %&#125;</code>, codes inside them can be replaced. </p>
<p> base.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">&#123;% block h1 %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>base&#x27;s h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;% block body %&#125;&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br><span class="line">&#123;% block body %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index&#x27;s h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/./images/image-20250303204123286.png" alt="image-20250303204123286"></p>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><h1 id="Admin"><a href="#Admin" class="headerlink" title="Admin"></a>Admin</h1><p>We can enter the <code>127.0.0.1:8000/admin</code>  url directly because the admin system is set by default in INSTALLED_APPS of setting.py and the path is also set by default in urlpatterns of  project urls.py. </p>
<p><img src="/./images/image-20250303214021862.png" alt="image-20250303214021862"></p>
<p>As you can see, username and password is required for access the admin system. The next step is create them. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">D:\MyDjango&gt;python manage.py createsuperuser</span><br><span class="line">Username (leave blank to use &#x27;000&#x27;): admin</span><br><span class="line">Email address:</span><br><span class="line">Password:</span><br><span class="line">Password (again):</span><br><span class="line">The password is too similar to the username.</span><br><span class="line">This password is too short.</span><br><span class="line">It must contain at least 8 characters.</span><br><span class="line">This password is too common.</span><br><span class="line">Bypass password validation and create user anyway? [y/N]:y</span><br><span class="line">Superuser created successfully.</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="Auth-System"><a href="#Auth-System" class="headerlink" title="Auth System"></a>Auth System</h1><p>Through auth system we can implement user register and login in user app.</p>
<p>To begin with, set the urls.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># project&#x27;s urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, include((<span class="string">&#x27;index.urls&#x27;</span>, <span class="string">&#x27;index&#x27;</span>), namespace=<span class="string">&#x27;index&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;user/&#x27;</span>, include((<span class="string">&#x27;user.urls&#x27;</span>, <span class="string">&#x27;user&#x27;</span>), namespace=<span class="string">&#x27;user&#x27;</span>))</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># user&#x27;s urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;login.html&#x27;</span>, loginView, name=<span class="string">&#x27;login&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;register.html&#x27;</span>, registerView, name=<span class="string">&#x27;register&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;steps.html&#x27;</span>, stepsView, name=<span class="string">&#x27;steps&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;logout.html&#x27;</span>, logoutView, name=<span class="string">&#x27;logout&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol>
<li><p>register</p>
<p>templates&#x2F;user.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    &#123;% load static %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/reset.css&#x27; %&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/user.css&#x27; %&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/jquery.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/user.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loginwarrp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span>&#123;&#123; pageTitle &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login_form&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;Login&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                &#123;% csrf_token %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;login-item&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login_input&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;count-msg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;login-item&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span>密　码：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login_input&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;password-msg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% if password2 %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;login-item&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>新密码：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login_input&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;password-msg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; tips &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;login-sub&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确定&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">li</span>&gt;</span>	</span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> config = &#123;</span></span><br><span class="line"><span class="language-javascript">			vx : <span class="number">4</span>,</span></span><br><span class="line"><span class="language-javascript">			vy : <span class="number">4</span>,</span></span><br><span class="line"><span class="language-javascript">			height : <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">			width : <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">			count : <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">			color : <span class="string">&quot;121, 162, 185&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">			stroke : <span class="string">&quot;100, 200, 180&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">			dist : <span class="number">6000</span>,</span></span><br><span class="line"><span class="language-javascript">			e_dist : <span class="number">20000</span>,</span></span><br><span class="line"><span class="language-javascript">			max_conn : <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">		&#125;;</span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">CanvasParticle</span>(config);</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &quot;</span><span class="attr">js</span>/<span class="attr">canvas-particle.js</span>&quot; %&#125;&quot;&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>user&#x2F;views.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> authenticate, login, logout</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">registerView</span>(<span class="params">request</span>):</span><br><span class="line">    title = <span class="string">&#x27;注册&#x27;</span></span><br><span class="line">    pageTitle = <span class="string">&#x27;用户注册&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        u = request.POST.get(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        p = request.POST.get(<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> User.objects.<span class="built_in">filter</span>(username=u):</span><br><span class="line">            tips = <span class="string">&#x27;用户已存在&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            d = <span class="built_in">dict</span>(username=u, password=p, is_staff=<span class="number">1</span>, is_superuser=<span class="number">1</span>)</span><br><span class="line">            user = User.objects.create_user(**d)</span><br><span class="line">            user.save()</span><br><span class="line">            tips = <span class="string">&#x27;注册成功，请登录&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;user.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>Now, we can check <code>http://127.0.0.1:8000/user/register.html</code> to see if it works. </p>
</li>
<li><p>login</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">loginView</span>(<span class="params">request</span>):</span><br><span class="line">    title = <span class="string">&#x27;登录&#x27;</span></span><br><span class="line">    pageTitle = <span class="string">&#x27;用户登录&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        u = request.POST.get(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        p = request.POST.get(<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> User.objects.<span class="built_in">filter</span>(username=u):</span><br><span class="line">            user = authenticate(username=u,password=p)</span><br><span class="line">            <span class="keyword">if</span> user:</span><br><span class="line">                <span class="keyword">if</span> user.is_active:</span><br><span class="line">                    login(request, user)</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tips = <span class="string">&#x27;账号密码错误，请重新输入&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tips = <span class="string">&#x27;用户不存在，请注册&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;user.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>
</li>
<li><p>setpassword</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">stepsView</span>(<span class="params">request</span>):</span><br><span class="line">    title = <span class="string">&#x27;修改密码&#x27;</span></span><br><span class="line">    pageTitle = <span class="string">&#x27;修改密码&#x27;</span></span><br><span class="line">    password2 = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        u = request.POST.get(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        p = request.POST.get(<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        p2 = request.POST.get(<span class="string">&#x27;password2&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> User.objects.<span class="built_in">filter</span>(username=u):</span><br><span class="line">            user = authenticate(username=u,password=p)</span><br><span class="line">            <span class="keyword">if</span> user:</span><br><span class="line">                user.set_password(p2)</span><br><span class="line">                user.save()</span><br><span class="line">                tips = <span class="string">&#x27;密码修改成功&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tips = <span class="string">&#x27;原始密码不正确&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tips = <span class="string">&#x27;用户不存在&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;user.html&#x27;</span>, <span class="built_in">locals</span>())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>logout</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logoutView</span>(<span class="params">request</span>):</span><br><span class="line">    logout(request)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;注销成功&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="User-permission"><a href="#User-permission" class="headerlink" title="User permission"></a>User permission</h1><h1 id="Session-Control"><a href="#Session-Control" class="headerlink" title="Session Control"></a>Session Control</h1><p>When user visits our website at the first time, the web server create a Session object which stores user’s information. As the user redirect to other web pages in our website.</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/django/">django</a></div><div class="post-share"><div class="social-share" data-image="/img/Tom.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/02/22/djangotutorial/djangotutorial/" title="Django Tutorial"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Django Tutorial</div></div><div class="info-2"><div class="info-item-1">What you have to know before you get startedThe thing you have to know before learning it is how it works. Suppose a server is running a Django app. Firstly, Django loads the setting.py file to initialize configurations like database connection. Then, Django opens a port 8000 by default, waiting for http requests.  Once a request comes in (for example,  when a user enters a URL in the browser), Django looks for the URL in the urls.py file. If it finds a match, the request is directed to a...</div></div></div></a><a class="pagination-related" href="/2025/02/26/css/css/" title="css tutorial"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">css tutorial</div></div><div class="info-2"><div class="info-item-1">CSS ruleA CSS rule consists of a selector and a declaration block.   Selector element selector The element selector selects elements based on the element name. 1234h1&#123;	color: white;	text-align: center;&#125;  Now all the h1 will be center-aligned, with while color.  id selector The id selector uses the id attribute of an element to select an element. 1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;style&gt;#para1 &#123;  text-align: center;  color:...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/02/22/djangotutorial/djangotutorial/" title="Django Tutorial"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-22</div><div class="info-item-2">Django Tutorial</div></div><div class="info-2"><div class="info-item-1">What you have to know before you get startedThe thing you have to know before learning it is how it works. Suppose a server is running a Django app. Firstly, Django loads the setting.py file to initialize configurations like database connection. Then, Django opens a port 8000 by default, waiting for http requests.  Once a request comes in (for example,  when a user enters a URL in the browser), Django looks for the URL in the urls.py file. If it finds a match, the request is directed to a...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/Tom.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">FerryChan</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">155</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/FerryChan666"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-build-a-website"><span class="toc-number">1.</span> <span class="toc-text">How to build a website</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MTV"><span class="toc-number">2.</span> <span class="toc-text">MTV</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Example"><span class="toc-number">3.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Preparation"><span class="toc-number">4.</span> <span class="toc-text">Preparation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#URL"><span class="toc-number">5.</span> <span class="toc-text">URL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Database"><span class="toc-number">6.</span> <span class="toc-text">Database</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql"><span class="toc-number">6.1.</span> <span class="toc-text">Mysql</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Back-end-Management"><span class="toc-number">7.</span> <span class="toc-text">Back-end Management</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#App"><span class="toc-number">8.</span> <span class="toc-text">App</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Model"><span class="toc-number">8.1.</span> <span class="toc-text">Model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Register-to-back-end"><span class="toc-number">8.2.</span> <span class="toc-text">Register to back-end</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Views"><span class="toc-number">9.</span> <span class="toc-text">Views</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-views"><span class="toc-number">9.1.</span> <span class="toc-text">Function views</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Including-another-URLconf"><span class="toc-number">9.2.</span> <span class="toc-text">Including another URLconf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Class-based-views"><span class="toc-number">9.3.</span> <span class="toc-text">Class-based views</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dynamic-URL"><span class="toc-number">9.4.</span> <span class="toc-text">Dynamic URL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interact-with-models"><span class="toc-number">9.5.</span> <span class="toc-text">Interact with models</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shortcuts"><span class="toc-number">9.6.</span> <span class="toc-text">Shortcuts</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Templates"><span class="toc-number">10.</span> <span class="toc-text">Templates</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TemplateView"><span class="toc-number">10.1.</span> <span class="toc-text">TemplateView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ListView"><span class="toc-number">10.2.</span> <span class="toc-text">ListView</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Namespace"><span class="toc-number">10.2.1.</span> <span class="toc-text">Namespace</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Form-System"><span class="toc-number">11.</span> <span class="toc-text">Form System</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CBV"><span class="toc-number">12.</span> <span class="toc-text">CBV</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-Display-Views"><span class="toc-number">12.1.</span> <span class="toc-text">Data Display Views</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-Manipulation-Views"><span class="toc-number">12.2.</span> <span class="toc-text">Data Manipulation Views</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Templates-1"><span class="toc-number">13.</span> <span class="toc-text">Templates</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#template-inheritance"><span class="toc-number">13.1.</span> <span class="toc-text">template inheritance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#filter"><span class="toc-number">13.2.</span> <span class="toc-text">filter</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Admin"><span class="toc-number">14.</span> <span class="toc-text">Admin</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Auth-System"><span class="toc-number">15.</span> <span class="toc-text">Auth System</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#User-permission"><span class="toc-number">16.</span> <span class="toc-text">User permission</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Session-Control"><span class="toc-number">17.</span> <span class="toc-text">Session Control</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/26/vue/vue/" title="vue3 tutorial">vue3 tutorial</a><time datetime="2025-02-26T13:07:23.000Z" title="Created 2025-02-26 21:07:23">2025-02-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/26/JavaScript/js%20tutorial/" title="js tutorial">js tutorial</a><time datetime="2025-02-26T11:28:20.000Z" title="Created 2025-02-26 19:28:20">2025-02-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/26/css/css/" title="css tutorial">css tutorial</a><time datetime="2025-02-26T10:08:37.000Z" title="Created 2025-02-26 18:08:37">2025-02-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/24/Starting-a-Website-with-Django/Starting-a-Website-with-Django/" title="Starting a Website with Django">Starting a Website with Django</a><time datetime="2025-02-24T12:14:10.000Z" title="Created 2025-02-24 20:14:10">2025-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/22/djangotutorial/djangotutorial/" title="Django Tutorial">Django Tutorial</a><time datetime="2025-02-22T07:28:10.000Z" title="Created 2025-02-22 15:28:10">2025-02-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>